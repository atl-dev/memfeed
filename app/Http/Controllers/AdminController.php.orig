<?php

namespace app\Http\Controllers;

use App\Http\Controllers\Controller;
use Redirect;
/**
 * Controller which handle administrative actions
 *
 * @package AdminController
<<<<<<< HEAD
 * @author Adrian Cybulski @Xeonid
=======
 * @author Adrian Cybulski @Xeonid 
>>>>>>> origin/master
 **/
class AdminController extends Controller
{
    public function __construct()
    {
        $this->middleware('auth');
<<<<<<< HEAD
        if(!Auth::user()->admin) {
          exit;
        }
=======
>>>>>>> origin/master
    }

    public function index()
    {

    }


    /**
     * Returns View with list of unapproved mems
     *
     * @return View
<<<<<<< HEAD
     * @param
=======
     * @param  
>>>>>>> origin/master
     **/
    public function manageMems()
    {
        $mems = App\Mem::all()->where('approved', 'no');

        return view('manage_mems', ['mems' => $mems]);
    }
    /**
     * Returns View with list of unapproved comments
     *
     * @return View
<<<<<<< HEAD
     * @param
=======
     * @param 
>>>>>>> origin/master
     **/
    public function manageComments()
    {
        $comments = Comment::all()->where('approved', 'no');

        return view('manage_comments', ['comments' => $comments]);
    }

    /**
     * approve comment and redirect to management
     *
     * @return Redirect
     * @param  Integer
     **/
    public function approveComment($id)
    {
        $comment = new App\Comment();
        $comment->approve($id);
        return Redirect::to('/manage/comments');
    }


    /**
     * approves mem and redirect to management
     *
     * @return Rediret
     * @param Integer
     **/
    public function approveMem($id)
    {
        $mem = new App\Mem();
        $mem->approve($id);
        return Redirect::to('/manage/mems');
    }
}
